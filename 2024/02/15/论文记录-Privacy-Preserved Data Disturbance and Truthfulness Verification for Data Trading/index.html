<!DOCTYPE html>


<html lang="zh-CN">

<head>
  <link rel="stylesheet" type="text/css" href="/css/matery.css">
  <meta charset="utf-8" />
    
  <meta name="description" content="审稿记录" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    论文记录-Privacy-Preserved Data Disturbance and Truthfulness Verification for Data Trading |  左边
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">
  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

</head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-论文记录-Privacy-Preserved Data Disturbance and Truthfulness Verification for Data Trading"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  论文记录-Privacy-Preserved Data Disturbance and Truthfulness Verification for Data Trading
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2024/02/15/%E8%AE%BA%E6%96%87%E8%AE%B0%E5%BD%95-Privacy-Preserved%20Data%20Disturbance%20and%20Truthfulness%20Verification%20for%20Data%20Trading/" class="article-date">
  <time datetime="2024-02-15T08:18:00.000Z" itemprop="datePublished">2024-02-15</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BA%E6%96%87/">论文</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">2.8k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">10 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Privacy-Preserved-Data-Disturbance-and-Truthfulness-Verification-for-Data-Trading"><a href="#Privacy-Preserved-Data-Disturbance-and-Truthfulness-Verification-for-Data-Trading" class="headerlink" title="Privacy-Preserved Data Disturbance and Truthfulness Verification for Data Trading"></a>Privacy-Preserved Data Disturbance and Truthfulness Verification for Data Trading</h1><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><ul>
<li>两种数据交易方式：初始交易和转卖交易</li>
<li>面临问题：交易数据的真实性无法通过隐私保护的方式得到保证<ul>
<li>数据生成者为了保护隐私而给数据添加的扰动是独立随机的，数据消费者无法在其所要求的扰动参数下验证交易数据是否受到扰动，而不会给数据生成者带来隐私泄露</li>
<li>由于允许转售交易，DC在保护其购买隐私的同时，在数据转售商（DR）的欺骗下很难验证交易数据的来源真实性</li>
</ul>
</li>
<li>本文提出：数据交易的隐私保护数据干扰和真实性验证<ul>
<li>引入了一个诚实但好奇的交易服务器（TS）来辅助我们设计的隐私可验证印记嵌入式干扰方法，其中印记是盲目的</li>
<li>TS 通过构建嵌入印记的个人验证公式，并要求被验证的参与者解密公式结果，来实现自适应真实性验证</li>
<li>被验证的参与者无法通过盲目的印记值来伪造正确的结果，从而确保了所设计验证方法的准确性</li>
</ul>
</li>
<li>理论分析和实验表明了有效性</li>
</ul>
<h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><ul>
<li>几个角色定位：<ul>
<li>数据消费者DC：广告商、服务提供商等</li>
<li>数据生成者DG</li>
<li>数据转卖者DR：DC买到数据以后可以再卖给其他人</li>
</ul>
</li>
<li>允许数据生成者以受干扰的版本发布数据从而保护隐私（我理解的就是差分隐私）</li>
<li>数据交易面临挑战：无法以隐私保护的方式同时保证交易数据的干扰真实性和来源真实性<ul>
<li>DG可能不按扰动参数添加噪声，而是添加更多噪声，而这难以被其他人验证，同时也存在干扰验证方法，会导致数据隐私泄露</li>
<li>DR会谎报数据来源以获取更高收益，一些研究通过添加数字水印的方法来确保数据来源可追溯，但带来了较大开销，而基于区块链的方法则暴露了DC的交易行为，带来新的隐私问题。</li>
</ul>
</li>
<li>本文：数据交易的隐私保护数据干扰和真实性验证<ul>
<li>引入了一个诚实但好奇的交易服务器（TS）来监督DG的独立数据干扰，这使得DG的干扰真实性可验证，同时保护DG的原始数据不被暴露。 </li>
<li>TS针对参与者多样化的不真实策略，通过设计的加密验证公式来验证交易数据的扰动性和来源真实性，不会带来任何DG的原始数据隐私成本或DC的购买隐私泄露。</li>
</ul>
</li>
<li>贡献：<ul>
<li>私人可验证的印记嵌入干扰方法：参考差分隐私，TS生成带验证位的噪声，DG基于隐私检索给数据添加随机噪声</li>
<li>自适应真实性验证方法：TS参考同态加密，构造嵌入印记的个人验证密文公式，并要求验证参与者解密公式结果，同时保留DG的原始数据和DC的购买隐私</li>
<li>理论分析和实验</li>
</ul>
</li>
</ul>
<h2 id="研究现状"><a href="#研究现状" class="headerlink" title="研究现状"></a>研究现状</h2><p>略过</p>
<ul>
<li>扰动真实性方面的研究：博弈论来确定扰动参数，但是DG可能不按照这个参数来添加，有研究做了可验证的扰动参数设置，但又带来隐私泄露的问题。也有真值挖掘和对等预测的方法，但数据交易中的真实数据可能不唯一。另一些通过博弈论设计约束机制的研究，但是DG和DC往往利益冲突，无解。</li>
<li>数据源真实性方面的研究：<ul>
<li>设计执行环境限制原始数据交易：限制交易灵活性</li>
<li>找第三方做相似性比较：可信第三方不好找</li>
<li>区块链：几个研究本身的场景有局限，方法倒是没问题</li>
<li>数字水印：几个研究没设计具体算法</li>
</ul>
</li>
</ul>
<h2 id="问题形式"><a href="#问题形式" class="headerlink" title="问题形式"></a>问题形式</h2><h3 id="系统模型"><a href="#系统模型" class="headerlink" title="系统模型"></a>系统模型</h3><ul>
<li>DG生成数据，并按照TS提供的噪声给数据添加扰动</li>
<li>DC获取指定扰动参数的数据，并借助TS验证扰动和来源的真实性</li>
<li>DR买了数据再转卖，这一过程中要验证扰动和来源的真实性</li>
<li>TS负责监管，给TS产生噪声，并自适应地验证其扰动和来源的真实性</li>
</ul>
<p>整个流程如下：</p>
<ol>
<li>TS生成噪声，DG用加法同态加密结合噪声给数据加密，隐私检索使得噪声对于大家都是未知的</li>
<li>TS构造加密验证公式，要求交易参与方解密公式结果，只有扰动和来源都真实的情况下才能得到正确结果<h3 id="问题定义"><a href="#问题定义" class="headerlink" title="问题定义"></a>问题定义</h3></li>
</ol>
<ul>
<li>$\varepsilon$表示DC希望的隐私参数</li>
<li>$d$：DG的原始数据</li>
<li>$\tilde{d}^{(a)}$：DG加扰动后的数据</li>
<li>$\eta$：添加的扰动噪声（这里感觉是写错了，原文用的是where，但是前面没出现这个字母，而后文扫了一下也没有）</li>
<li>$O_{\tilde{d}^{(a)}}^{c}$是数据$\tilde{d}^{(a)}$声称的来源，而 $O_{\tilde{d}^{(a)}}^{t}$和 $O_{\tilde{d}^{(a)}}^{u}$分别是真实来源和假来源</li>
</ul>
<p>存在的恶意行为：</p>
<ol>
<li>DG添加比隐私参数要求更多的噪声</li>
<li>DC转卖数据时谎报来源</li>
</ol>
<p>定义1：隐私保护的扰动真实性的可验证性：在不暴露原数据和噪声的情况下，DC可以验证扰动后的数据=原数据+噪声，也能验证噪声满足差分隐私的要求。</p>
<p>定义2：隐私保护的来源真实性的可验证性：DC收到数据后可以在不暴露交易隐私的情况下验证数据来源。</p>
<h3 id="威胁模型"><a href="#威胁模型" class="headerlink" title="威胁模型"></a>威胁模型</h3><p>TS是诚实但好奇的第三方：TS会遵循协议设计噪声等，但对DG的原数据感兴趣，甚至会和DC串通获取原数据</p>
<p>TS的攻击方式：泄露原数据、泄露噪声</p>
<p>DG的攻击方式：加更多噪声</p>
<p>DR的攻击方式：谎报数据来源和扰动参数</p>
<h3 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h3><ol>
<li>交易数据的扰动真实性和来源真实性</li>
<li>DG原数据的隐私和DC购买行为的隐私</li>
</ol>
<h2 id="本文方案"><a href="#本文方案" class="headerlink" title="本文方案"></a>本文方案</h2><ol>
<li>TS用DC提供的公钥生成一组噪声，每个噪声都带一个验证位，验证的时候，对噪声和验证位分别用DG的公钥加密，然后对两个加密后的数据进行某种运算，就可以得到由扰动参数决定的相关函数$f(\varepsilon)$，运算方式和函数都由TS决定，且每轮都会改变。</li>
<li>DG生成$n$维密文向量$\omega$，其中第$k$项$w_k$是对1使用DG公钥加密后的密文，而其他位是对0加密的密文。</li>
<li>TS对$\omega$和前面第一条中带验证的噪声执行内积，得到的结果就是DG需要的随机噪声（DG公钥加密版），由此，DG可以用自己的私钥解密得到使用DC公钥加密的噪声，接着DG通过同态加密对数据添加扰动，这样DG并不知道DC要加多少噪声，也不知道噪声具体是什么样的，但实现了指定噪声量的添加。</li>
<li>接下来TS构造一个函数，按照函数的运算结果，第一次卖和转卖算出来的会不一样，从而确保来源可追溯。</li>
</ol>
<p>概括来说就是分两部分：</p>
<ol>
<li>干扰嵌入：这部分的功能是实现保护数据隐私和噪声量隐私的前提下实现对数据的扰动嵌入。具体流程其实前面已经介绍两次了，DC提出指定的差分隐私扰动参数，TS基于参数生成噪声+验证位，DG生成密文向量并发给TS，TS对密文向量和噪声+验证位做内积，得到最终添加的扰动，发给DG，DG可以用私钥解密得到噪声+验证位，然后DG将原数据与噪声相加（注意验证位并不加进去）。当然DG可以在这里添加不满足参数要求的噪声。</li>
<li>自适应真实性验证：这部分是实现真实性的验证，如前文所说，包括添加噪声量的真实性和来源的真实性。<ol>
<li>噪声量真实性：简单来说就是构造一个可以用同态加密计算的公式，公式大致是扰动后数据-扰动噪声-原数据+TS随机选的一个数（保密），公式中的每个部分都先用DC公钥加密再用DG公钥加密，TS将公式计算结果先发给DG，DG用私钥解密，解密结果再发给DC，DC再用私钥解密，如果扰动参数没问题，根据同态加密，这样解密完的结果就是TS随机选的那个数。</li>
<li>来源真实性：计算步骤和前面是一致的，核心思想就是如果这个DG并不是数据的真实来源，那他不可能算出正确结果。</li>
</ol>
</li>
</ol>
<p>接下来的内容基本上是各功能的证明，以及实验。实验部分用了真实的传感数据，不过自定义了诚实的概率，实验表明本文的方法比baseline更能发现不诚实的交易。</p>
<h2 id="最终意见"><a href="#最终意见" class="headerlink" title="最终意见"></a>最终意见</h2><p>小修</p>
<p>summary:<br>The paper presents a novel approach to enhance privacy and truthfulness in data trading. It introduces a system incorporating privacy-preserved data disturbance and truthfulness verification mechanisms to ensure data integrity and confidentiality in trading scenarios. The methodology involves an honest-but-curious trading server to oversee data disturbance, allowing for the verification of data truthfulness while protecting raw data from exposure. The paper also proposes an encrypted verification formula that verifies traded data’s truthfulness without imposing privacy costs on participants.</p>
<p>strength:</p>
<ol>
<li>Innovative Approach: The paper’s proposal for a privacy-preserved data disturbance mechanism coupled with truthfulness verification is novel and addresses significant concerns in data trading.</li>
<li>Privacy Protection: The methodology ensures that the privacy of the data is maintained throughout the trading process, which is crucial for sensitive or personal information.</li>
<li>Verification without Privacy Cost: The verification process designed does not add any privacy cost to trading participants, promoting a secure trading environment.</li>
</ol>
<p>weakness:</p>
<ul>
<li>Related work中两部分的内容都是一长段话，建议分类总结一下，增强可读性</li>
<li>一些符号和表示方法没有解释，需要补充</li>
<li>Section IV.B, “Based on the above two modules including the private-verifiable imprint-embedded disturbance and private-verifiable imprint-embedded disturbance,”重复了</li>
<li>补充一个问题：$\omega$向量的第k位是用DG公钥加密的1，而其余位是用DG公钥加密的0，那么收到向量的TS只需要对比一下哪一位和其他位不同，就可以判断出哪一位是1了吧，这能起到保密作用吗？还是说没有按位加密而是整个向量一起加密？</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://likun1208.github.io/2024/02/15/%E8%AE%BA%E6%96%87%E8%AE%B0%E5%BD%95-Privacy-Preserved%20Data%20Disturbance%20and%20Truthfulness%20Verification%20for%20Data%20Trading/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%A1%E7%A8%BF%E6%84%8F%E8%A7%81/" rel="tag">审稿意见</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2024/03/15/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95-20240315/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            生活记录-20240315
          
        </div>
      </a>
    
    
      <a href="/2024/01/02/2023%E5%B9%B410%E6%9C%881%E6%97%A5-12%E6%9C%8831%E6%97%A5%E5%86%B3%E7%AE%97%E5%8F%8A2024%E4%B8%8A%E5%8D%8A%E5%B9%B4%E9%A2%84%E7%AE%97/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">2023年10月1日-12月31日决算及2024上半年预算</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "VqvB5y0diPuBd9JFy4kQbHxz-gzGzoHsz",
    app_key: "Gmmb4mTXjSDf8ndcJ0ex4Ufi",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2020-2024
        <i class="ri-heart-fill heart_icon"></i> Kun Li
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        由 <a href="https://hexo.io" target="_blank">Hexo</a> 强力驱动
        <span class="division">|</span>
        主题 - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer.png" alt="左边"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/cv-ch">个人简历</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/cv-en">Resume</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
<div id="waifu">
    <div id="waifu-message"></div>
    <div class="waifu-tool">
        <span class="icon-next"></span>
        <span class="icon-home"></span>
        <span class="icon-message"></span>
        <span class="icon-camera"></span>
        <span class="icon-volumeup"></span>
        <span class="icon-volumedown"></span>
        <span class="icon-about"></span>
        <span class="icon-cross"></span>
    </div>
    <canvas id="live2d2" style="top:150px"></canvas>
    <canvas id="live2d4" style="top:150px"></canvas>
</div>
<!--    src 中改为你存放的路径    -->
<script src="/dist/live2d_bundle.js"></script>
<script async type="module" src="/js/waifu-tips.js"></script>

</body>

</html>